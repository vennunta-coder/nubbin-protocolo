<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rede dos 5 Minutos</title>
    <script src="https://cdn.tailwindcss.com"></script>
  
  <link rel="icon" href="assets/favicon.svg" type="image/svg+xml">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#f97316">
</head>
  <body class="bg-neutral-950 text-neutral-50">
    <!-- Header -->
    <header class="sticky top-0 bg-neutral-950/80 backdrop-blur border-b border-neutral-800">
      <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
        <div class="flex items-center gap-2">
          <svg width="28" height="28" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg">
            <rect x="8" y="8" width="112" height="112" rx="28" fill="#f59e0b" />
            <path d="M64 64 V44" stroke="#0a0a0a" stroke-width="10" stroke-linecap="round" />
            <path d="M64 64 L84 72" stroke="#0a0a0a" stroke-width="10" stroke-linecap="round" />
            <circle cx="64" cy="64" r="6" fill="#0a0a0a" />
          </svg>
          <span class="font-bold text-lg">Rede dos 5 Minutos</span>
        </div>
        <a href="#form" class="bg-orange-500 text-neutral-950 font-semibold px-4 py-2 rounded-xl hover:bg-orange-400 transition">Quero Registrar </a>
      </div>
    </header>

    <!-- Hero -->
    <section class="max-w-6xl mx-auto px-4 py-20 text-center">
      <h1 class="text-4xl md:text-6xl font-black mb-6">
        Conecte-se em apenas <span class="text-orange-500">5 minutos por dia</span>
      </h1>
      <p class="max-w-2xl mx-auto text-neutral-300 text-lg mb-8">
        Uma rede social minimalista: sem feeds infinitos, sem v√≠cio.
        Apenas um instante real de conex√£o di√°ria.
      </p>
      <form
        id="form"
        class="max-w-md mx-auto flex gap-2"
      >
        <input
          type="email"
          id="email"
          required
          placeholder="seuemail@exemplo.com"
          class="flex-1 rounded-2xl border border-neutral-800 bg-neutral-900 px-4 py-3 text-sm text-neutral-100 placeholder:text-neutral-500 focus:outline-none focus:ring-2 focus:ring-orange-500"
        />
        <button
          type="submit"
          class="bg-orange-500 px-5 py-3 rounded-2xl font-semibold text-neutral-950 shadow-[0_4px_0_#7c2d12] hover:translate-y-0.5 active:translate-y-1 transition"
        >
          Quero ser avisado
        </button>
      </form>
      <p id="feedbackMsg" class="text-sm mt-3 text-green-400 hidden">
        Obrigado pelo cadastro! üéâ
      </p>
    </section>

    <!-- Sobre -->
    <section id="sobre" class="max-w-6xl mx-auto px-4 py-16 text-center">
      <h2 class="text-3xl font-bold mb-4">Sobre a Rede</h2>
      <p class="max-w-3xl mx-auto text-neutral-300">
        A Rede dos 5 Minutos nasceu da necessidade de desacelerar.
        Aqui, cada pessoa tem apenas cinco minutos por dia para se expressar
        e interagir. √â uma pausa consciente em meio ao excesso de informa√ß√£o.
      </p>
    </section>

    <!-- Como funciona -->
    <section id="como-funciona" class="bg-neutral-900 py-16">
      <div class="max-w-6xl mx-auto px-4 grid md:grid-cols-3 gap-10 text-center">
        <div class="p-6 rounded-2xl border border-neutral-800 bg-neutral-950">
          <h3 class="text-xl font-semibold mb-2">1. Acesse</h3>
          <p class="text-neutral-400">Uma vez por dia, entre na rede.</p>
        </div>
        <div class="p-6 rounded-2xl border border-neutral-800 bg-neutral-950">
          <h3 class="text-xl font-semibold mb-2">2. Compartilhe</h3>
          <p class="text-neutral-400">Poste seus pensamentos ou fotos em at√© 5 minutos.</p>
        </div>
        <div class="p-6 rounded-2xl border border-neutral-800 bg-neutral-950">
          <h3 class="text-xl font-semibold mb-2">3. Conecte</h3>
          <p class="text-neutral-400">Interaja de forma r√°pida, sem perder tempo.</p>
        </div>
      </div>
    </section>

    <!-- Inclus√£o -->
    <section id="genero" class="max-w-6xl mx-auto px-4 py-16 text-center">
      <h2 class="text-3xl font-bold mb-4">Uma rede para todos</h2>
      <p class="max-w-3xl mx-auto text-neutral-300">
        A Rede dos 5 Minutos √© inclusiva e diversa.  
        N√£o importa seu g√™nero, identidade ou origem ‚Äî todos s√£o bem-vindos
        a compartilhar seus 5 minutos de verdade.
      </p>
    </section>

    <!-- FAQ -->
    <section id="faq" class="bg-neutral-900 py-16">
      <div class="max-w-3xl mx-auto px-4">
        <h2 class="text-3xl font-bold mb-8 text-center">Perguntas Frequentes</h2>
        <div class="space-y-6">
          <div>
            <h3 class="font-semibold">√â pago?</h3>
            <p class="text-neutral-400">N√£o, o acesso b√°sico ser√° gratuito.</p>
          </div>
          <div>
            <h3 class="font-semibold">Posso postar mais de uma vez?</h3>
            <p class="text-neutral-400">Voc√™ pode postar e interagir dentro dos 5 minutos di√°rios.</p>
          </div>
          <div>
            <h3 class="font-semibold">Posso recuperar posts antigos?</h3>
            <p class="text-neutral-400">Sim, seu hist√≥rico fica salvo no seu perfil.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA final -->
    <section class="bg-orange-500 text-neutral-950 py-16 text-center">
      <h2 class="text-3xl font-black mb-4">Pronto para se conectar de forma saud√°vel?</h2>
      <a href="#form" class="bg-neutral-950 text-orange-500 px-6 py-3 rounded-2xl font-semibold hover:bg-neutral-800 transition">Quero Registrar </a>
    </section>

    <!-- Footer -->
    <footer class="max-w-6xl mx-auto px-4 py-10 text-center text-neutral-500 text-sm">
      <p>¬© 2025 Rede dos 5 Minutos. Todos os direitos reservados.</p>
      <div class="flex justify-center gap-4 mt-4">
        <a href="#" class="hover:text-orange-500">Twitter</a>
        <a href="#" class="hover:text-orange-500">Instagram</a>
        <a href="#" class="hover:text-orange-500">Contato</a>
      </div>
    </footer>

    <!-- Script de feedback -->
    <script>
      const form = document.getElementById("form");
      const emailInput = document.getElementById("email");
      const feedback = document.getElementById("feedbackMsg");

      form.addEventListener("submit", function (e) {
        e.preventDefault(); // impede reload
        const email = emailInput.value.trim();

        if (!email) return;

        // Simula√ß√£o de envio
        setTimeout(() => {
          feedback.classList.remove("hidden");
          emailInput.value = "";
        }, 500);
      });
    </script>
  
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

<script>
// ===== Supabase config =====
const SUPABASE_URL = "https://eekaqwyyzgoecrrlveqp.supabase.co";
const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVla2Fxd3l5emdvZWNycmx2ZXFwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1ODU2MDcsImV4cCI6MjA3MjE2MTYwN30.r2DYIA0X_6wZQjIAuwimtIotIqiRbkM8oXuuJokieFc";
const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

// ===== Estado/HUD util =====
const STORAGE_KEY = 'NUBBIN_PROGRESS_V1';
function phaseOf(level){ return Math.ceil(level/10); }
function phaseStart(level){ return (phaseOf(level)-1)*10 + 1; }
function saveProgress(level){ localStorage.setItem(STORAGE_KEY, String(level)); }
function goToLevel(level){
  saveProgress(level);
  const s = document.getElementById('nivel'+level);
  if(s){ document.querySelectorAll('section').forEach(el=>{ if(el.id && el.id.startsWith('nivel')) el.classList.add('hidden'); }); s.classList.remove('hidden'); }
  window.scrollTo({top:0,behavior:'smooth'});
}

// ===== APIs Supabase =====
let currentUser = null;

async function registrar(nome, idade, local) {
  const { data, error } = await supabase.from('users').insert([{ name:nome, age:parseInt(idade), location:local }]).select();
  if(error){ console.error(error); alert('Falha no registro.'); return null; }
  return data[0];
}

async function salvarProgresso(level, completed=true) {
  if(!currentUser) return;
  const { data, error } = await supabase.from('progress').upsert([{ user_id: currentUser.id, level, completed }]).select();
  if(error) console.error(error);
  return data;
}

async function salvarRanking(score) {
  if(!currentUser) return;
  const { data, error } = await supabase.from('ranking').insert([{ user_id: currentUser.id, score }]).select();
  if(error) console.error(error);
  return data;
}

async function carregarRanking() {
  const { data, error } = await supabase.from('ranking').select('score, created_at, users!inner(name)').order('score', { ascending:false }).limit(10);
  if(error){ console.error(error); return []; }
  return data;
}

// ===== Registro form binding (se existir) =====
document.addEventListener('DOMContentLoaded', ()=>{
  const form = document.getElementById('form');
  if(form){
    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const nome = document.getElementById('nome')?.value?.trim()||'';
      const idade = document.getElementById('idade')?.value?.trim()||'';
      const local = document.getElementById('local')?.value?.trim()||'';
      const user = await registrar(nome, idade, local);
      if(!user) return;
      currentUser = user;
      const fb = document.getElementById('feedbackMsg');
      if(fb){ fb.classList.remove('hidden'); fb.innerText = `Registro conclu√≠do. Recruta ${nome}, ${idade} anos, origem ${local}. Iniciando protocolo...`; }
      setTimeout(()=>{ if(typeof startNivel1==='function') startNivel1(); else goToLevel(1); }, 600);
    });
  }
});

// ===== Falha rigorosa (override) =====
function falha(level){
  alert('Falha detectada, Recruta. Rein√≠cio para o in√≠cio da fase.');
  const start = phaseStart(level);
  localStorage.setItem(STORAGE_KEY, String(start));
  if(start === 1) { const reg = document.getElementById('registro'); if(reg) reg.classList.add('hidden'); goToLevel(1); }
  else { goToLevel(start); }
}

// ===== Ranking render (se existir) =====
document.addEventListener('DOMContentLoaded', async ()=>{
  const el = document.getElementById('rankingList');
  if(!el) return;
  el.textContent = 'Carregando...';
  const top = await carregarRanking();
  if(!top.length) { el.textContent = 'Sem registos.'; return; }
  el.innerHTML = top.map((r,i)=>`<div class='flex justify-between'><span>${i+1}. ${r.users.name||'An√≥nimo'}</span><span>${r.score}</span></div>`).join('');
});

// ===== N√≠vel 1 helpers (se existirem) =====
let seq='';
function startNivel1(){
  const reg = document.getElementById('registro'); if(reg) reg.classList.add('hidden');
  const s1 = document.getElementById('nivel1'); if(s1) s1.classList.remove('hidden');
  seq = String(Math.floor(Math.random()*900+100));
  const el = document.getElementById('sequencia'); if(el) el.innerText = seq;
  setTimeout(()=>{ const el2 = document.getElementById('sequencia'); if(el2) el2.innerText = '???'; }, 2000);
  goToLevel(1);
}
function mostrarInput(){ const r = document.getElementById('responder'); if(r) r.classList.remove('hidden'); }
async function validarResposta(){
  const v = document.getElementById('resposta')?.value?.trim()||'';
  if(v === seq){ alert('Correto. Avan√ßas para o n√≠vel 2.'); await salvarProgresso(1,true); if(typeof showNivel2==='function') showNivel2(); }
  else { falha(1); }
}

// ===== N√≠vel 2 helpers (gen√©rico) =====
let logica={texto:'', resposta:''};
function genSeq(){
  const base = 2+Math.floor(Math.random()*3); const start=2; const a=[start];
  for(let i=0;i<4;i++) a.push(a[a.length-1]*base);
  logica.texto = a.slice(0,4).join(', ') + ', ?';
  logica.resposta = String(a[4]);
}
function showNivel2(){
  genSeq();
  const s2 = document.getElementById('nivel2'); const s1 = document.getElementById('nivel1');
  if(s1) s1.classList.add('hidden'); if(s2) s2.classList.remove('hidden');
  const lab = document.getElementById('seqLogica'); if(lab) lab.innerText = logica.texto;
  goToLevel(2);
}
async function validarNivel2(){
  const val = document.getElementById('respostaLogica')?.value?.trim()||'';
  if(val === logica.resposta){ alert('Correto. Avan√ßas para o n√≠vel 3.'); await salvarProgresso(2,true); if(typeof showNivel3==='function') showNivel3(); }
  else { falha(2); }
}

// ===== N√≠vel 3 helpers (gen√©rico) =====
let reflexTimer=null; let clickWindow=1400;
function showNivel3(){
  const s2 = document.getElementById('nivel2'); const s3 = document.getElementById('nivel3');
  if(s2) s2.classList.add('hidden'); if(s3) s3.classList.remove('hidden');
  const arena = document.getElementById('arena'); if(!arena) return;
  arena.innerHTML=''; const msg=document.getElementById('reflexMsg'); if(msg) msg.innerText = 'Aguarda pelo alvo...';
  const delay = 700 + Math.random()*1500;
  setTimeout(()=>spawnAlvo(arena), delay);
}
function spawnAlvo(arena){
  const alvo = document.createElement('button');
  alvo.className = 'absolute w-10 h-10 rounded-full bg-orange-500 text-black text-xs';
  alvo.textContent = 'ALVO';
  const maxX = arena.clientWidth - 40; const maxY = arena.clientHeight - 40;
  alvo.style.left = Math.floor(Math.random()*maxX)+'px';
  alvo.style.top  = Math.floor(Math.random()*maxY)+'px';
  arena.appendChild(alvo);
  reflexTimer = setTimeout(()=>{ if(arena.contains(alvo)) falha(3); }, clickWindow);
  alvo.addEventListener('click', async ()=>{
    clearTimeout(reflexTimer); arena.innerHTML='';
    const msg=document.getElementById('reflexMsg'); if(msg) msg.innerText='Alvo atingido.';
    await salvarProgresso(3,true); await salvarRanking(50);
  });
}
</script>

</body>
</html>
